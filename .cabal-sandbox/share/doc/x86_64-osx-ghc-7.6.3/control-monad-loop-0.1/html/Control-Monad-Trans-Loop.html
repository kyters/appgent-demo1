<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Control.Monad.Trans.Loop</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Control-Monad-Trans-Loop.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">control-monad-loop-0.1: Simple monad transformer for imperative-style loops</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Maintainer</th><td>joeyadams3.14159@gmail.com</td></tr><tr><th>Safe Haskell</th><td>None</td></tr></table><p class="caption">Control.Monad.Trans.Loop</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">The LoopT monad transformer
</a></li><li><a href="#g:2">continue and exit
</a></li><li><a href="#g:3">Looping constructs
</a></li><li><a href="#g:4">Lifting other operations
</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc empty">&nbsp;</div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">newtype</span>  <a href="#t:LoopT">LoopT</a> c e m a = <a href="#v:LoopT">LoopT</a> {<ul class="subs"><li><a href="#v:runLoopT">runLoopT</a> :: <span class="keyword">forall</span> r.  (c -&gt; m r) -&gt; (e -&gt; m r) -&gt; (a -&gt; m r) -&gt; m r</li></ul>}</li><li class="src short"><a href="#v:stepLoopT">stepLoopT</a> :: <a href="file:///usr/local/Cellar/ghc/7.6.3/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="Control-Monad-Trans-Loop.html#t:LoopT">LoopT</a> c e m c -&gt; (c -&gt; m e) -&gt; m e</li><li class="src short"><a href="#v:continue">continue</a> ::  <a href="Control-Monad-Trans-Loop.html#t:LoopT">LoopT</a> () e m a</li><li class="src short"><a href="#v:exit">exit</a> ::  <a href="Control-Monad-Trans-Loop.html#t:LoopT">LoopT</a> c () m a</li><li class="src short"><a href="#v:continueWith">continueWith</a> ::  c -&gt; <a href="Control-Monad-Trans-Loop.html#t:LoopT">LoopT</a> c e m a</li><li class="src short"><a href="#v:exitWith">exitWith</a> ::  e -&gt; <a href="Control-Monad-Trans-Loop.html#t:LoopT">LoopT</a> c e m a</li><li class="src short"><a href="#v:foreach">foreach</a> :: <a href="file:///usr/local/Cellar/ghc/7.6.3/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:Monad">Monad</a> m =&gt; [a] -&gt; (a -&gt; <a href="Control-Monad-Trans-Loop.html#t:LoopT">LoopT</a> c () m c) -&gt; m ()</li><li class="src short"><a href="#v:while">while</a> :: <a href="file:///usr/local/Cellar/ghc/7.6.3/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:Monad">Monad</a> m =&gt; m <a href="file:///usr/local/Cellar/ghc/7.6.3/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Bool.html#t:Bool">Bool</a> -&gt; <a href="Control-Monad-Trans-Loop.html#t:LoopT">LoopT</a> c () m c -&gt; m ()</li><li class="src short"><a href="#v:doWhile">doWhile</a> :: <a href="file:///usr/local/Cellar/ghc/7.6.3/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="Control-Monad-Trans-Loop.html#t:LoopT">LoopT</a> a a m a -&gt; m <a href="file:///usr/local/Cellar/ghc/7.6.3/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Bool.html#t:Bool">Bool</a> -&gt; m a</li><li class="src short"><a href="#v:once">once</a> :: <a href="file:///usr/local/Cellar/ghc/7.6.3/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="Control-Monad-Trans-Loop.html#t:LoopT">LoopT</a> a a m a -&gt; m a</li><li class="src short"><a href="#v:repeatLoopT">repeatLoopT</a> :: <a href="file:///usr/local/Cellar/ghc/7.6.3/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="Control-Monad-Trans-Loop.html#t:LoopT">LoopT</a> c e m a -&gt; m e</li><li class="src short"><a href="#v:iterateLoopT">iterateLoopT</a> :: <a href="file:///usr/local/Cellar/ghc/7.6.3/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:Monad">Monad</a> m =&gt; c -&gt; (c -&gt; <a href="Control-Monad-Trans-Loop.html#t:LoopT">LoopT</a> c e m c) -&gt; m e</li><li class="src short"><a href="#v:liftLocalLoopT">liftLocalLoopT</a> :: <a href="file:///usr/local/Cellar/ghc/7.6.3/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:Monad">Monad</a> m =&gt; (<span class="keyword">forall</span> a.  m a -&gt; m a) -&gt; <a href="Control-Monad-Trans-Loop.html#t:LoopT">LoopT</a> c e m b -&gt; <a href="Control-Monad-Trans-Loop.html#t:LoopT">LoopT</a> c e m b</li></ul></div><div id="interface"><h1 id="g:1">The LoopT monad transformer
</h1><div class="top"><p class="src"><span class="keyword">newtype</span>  <a name="t:LoopT" class="def">LoopT</a> c e m a </p><div class="doc"><p><code><a href="Control-Monad-Trans-Loop.html#t:LoopT">LoopT</a></code> is a monad transformer for the loop body.  It provides two
 capabilities:
</p><ul><li> <code><a href="Control-Monad-Trans-Loop.html#v:continue">continue</a></code> to the next iteration.
</li><li> <code><a href="Control-Monad-Trans-Loop.html#v:exit">exit</a></code> the whole loop.
</li></ul></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:LoopT" class="def">LoopT</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:runLoopT" class="def">runLoopT</a> :: <span class="keyword">forall</span> r.  (c -&gt; m r) -&gt; (e -&gt; m r) -&gt; (a -&gt; m r) -&gt; m r</dt><dd class="doc empty">&nbsp;</dd></dl><div class="clear"></div></div></td></tr></table></div><div class="subs instances"><p id="control.i:LoopT" class="caption collapser" onclick="toggleSection('i:LoopT')">Instances</p><div id="section.i:LoopT" class="show"><table><tr><td class="src"><a href="file:///Users/dvekeman/github-vircures/appgent-ekiden-demo/.cabal-sandbox/share/doc/x86_64-osx-ghc-7.6.3/transformers-base-0.4.1/html/Control-Monad-Base.html#t:MonadBase">MonadBase</a> b m =&gt; <a href="file:///Users/dvekeman/github-vircures/appgent-ekiden-demo/.cabal-sandbox/share/doc/x86_64-osx-ghc-7.6.3/transformers-base-0.4.1/html/Control-Monad-Base.html#t:MonadBase">MonadBase</a> b (<a href="Control-Monad-Trans-Loop.html#t:LoopT">LoopT</a> c e m)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///Users/dvekeman/github-vircures/appgent-ekiden-demo/.cabal-sandbox/share/doc/x86_64-osx-ghc-7.6.3/transformers-0.3.0.0/html/Control-Monad-Trans-Class.html#t:MonadTrans">MonadTrans</a> (<a href="Control-Monad-Trans-Loop.html#t:LoopT">LoopT</a> c e)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///usr/local/Cellar/ghc/7.6.3/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:Monad">Monad</a> (<a href="Control-Monad-Trans-Loop.html#t:LoopT">LoopT</a> c e m)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///usr/local/Cellar/ghc/7.6.3/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:Functor">Functor</a> (<a href="Control-Monad-Trans-Loop.html#t:LoopT">LoopT</a> c e m)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///usr/local/Cellar/ghc/7.6.3/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Applicative.html#t:Applicative">Applicative</a> (<a href="Control-Monad-Trans-Loop.html#t:LoopT">LoopT</a> c e m)</td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="file:///Users/dvekeman/github-vircures/appgent-ekiden-demo/.cabal-sandbox/share/doc/x86_64-osx-ghc-7.6.3/transformers-0.3.0.0/html/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> m =&gt; <a href="file:///Users/dvekeman/github-vircures/appgent-ekiden-demo/.cabal-sandbox/share/doc/x86_64-osx-ghc-7.6.3/transformers-0.3.0.0/html/Control-Monad-IO-Class.html#t:MonadIO">MonadIO</a> (<a href="Control-Monad-Trans-Loop.html#t:LoopT">LoopT</a> c e m)</td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:stepLoopT" class="def">stepLoopT</a> :: <a href="file:///usr/local/Cellar/ghc/7.6.3/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="Control-Monad-Trans-Loop.html#t:LoopT">LoopT</a> c e m c -&gt; (c -&gt; m e) -&gt; m e</p><div class="doc"><p>Call a loop body, passing it a continuation for the next iteration.
 This can be used to construct custom looping constructs.  For example,
 here is the definition of <code><a href="Control-Monad-Trans-Loop.html#v:foreach">foreach</a></code>:
</p><pre>foreach list body = loop list
  where loop []     = return ()
        loop (x:xs) = stepLoopT (body x) (\_ -&gt; loop xs)
</pre></div></div><h1 id="g:2">continue and exit
</h1><div class="top"><p class="src"><a name="v:continue" class="def">continue</a> ::  <a href="Control-Monad-Trans-Loop.html#t:LoopT">LoopT</a> () e m a</p><div class="doc"><p>Skip the rest of the loop body and go to the next iteration.
</p></div></div><div class="top"><p class="src"><a name="v:exit" class="def">exit</a> ::  <a href="Control-Monad-Trans-Loop.html#t:LoopT">LoopT</a> c () m a</p><div class="doc"><p>Break out of the loop entirely.
</p></div></div><div class="top"><p class="src"><a name="v:continueWith" class="def">continueWith</a> ::  c -&gt; <a href="Control-Monad-Trans-Loop.html#t:LoopT">LoopT</a> c e m a</p><div class="doc"><p>Like <code><a href="Control-Monad-Trans-Loop.html#v:continue">continue</a></code>, but return a value from the loop body.
</p></div></div><div class="top"><p class="src"><a name="v:exitWith" class="def">exitWith</a> ::  e -&gt; <a href="Control-Monad-Trans-Loop.html#t:LoopT">LoopT</a> c e m a</p><div class="doc"><p>Like <code><a href="Control-Monad-Trans-Loop.html#v:exit">exit</a></code>, but return a value from the loop as a whole.
 See the documentation of <code><a href="Control-Monad-Trans-Loop.html#v:iterateLoopT">iterateLoopT</a></code> for an example.
</p></div></div><h1 id="g:3">Looping constructs
</h1><div class="top"><p class="src"><a name="v:foreach" class="def">foreach</a> :: <a href="file:///usr/local/Cellar/ghc/7.6.3/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:Monad">Monad</a> m =&gt; [a] -&gt; (a -&gt; <a href="Control-Monad-Trans-Loop.html#t:LoopT">LoopT</a> c () m c) -&gt; m ()</p><div class="doc"><p>Call the loop body with each item in the list.
</p><p>If you do not need to <code><a href="Control-Monad-Trans-Loop.html#v:continue">continue</a></code> or <code><a href="Control-Monad-Trans-Loop.html#v:exit">exit</a></code> the loop, consider using
 <code><a href="file:///usr/local/Cellar/ghc/7.6.3/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:forM_">forM_</a></code> instead.
</p></div></div><div class="top"><p class="src"><a name="v:while" class="def">while</a> :: <a href="file:///usr/local/Cellar/ghc/7.6.3/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:Monad">Monad</a> m =&gt; m <a href="file:///usr/local/Cellar/ghc/7.6.3/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Bool.html#t:Bool">Bool</a> -&gt; <a href="Control-Monad-Trans-Loop.html#t:LoopT">LoopT</a> c () m c -&gt; m ()</p><div class="doc"><p>Repeat the loop body while the predicate holds.  Like a <code>while</code> loop in C,
 the condition is tested first.
</p></div></div><div class="top"><p class="src"><a name="v:doWhile" class="def">doWhile</a> :: <a href="file:///usr/local/Cellar/ghc/7.6.3/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="Control-Monad-Trans-Loop.html#t:LoopT">LoopT</a> a a m a -&gt; m <a href="file:///usr/local/Cellar/ghc/7.6.3/share/doc/ghc/html/libraries/base-4.6.0.1/Data-Bool.html#t:Bool">Bool</a> -&gt; m a</p><div class="doc"><p>Like a <code>do while</code> loop in C, where the condition is tested after
 the loop body.
</p><p><code><a href="Control-Monad-Trans-Loop.html#v:doWhile">doWhile</a></code> returns the result of the last iteration.  This is possible
 because, unlike <code><a href="Control-Monad-Trans-Loop.html#v:foreach">foreach</a></code> and <code><a href="Control-Monad-Trans-Loop.html#v:while">while</a></code>, the loop body is guaranteed to be
 executed at least once.
</p></div></div><div class="top"><p class="src"><a name="v:once" class="def">once</a> :: <a href="file:///usr/local/Cellar/ghc/7.6.3/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="Control-Monad-Trans-Loop.html#t:LoopT">LoopT</a> a a m a -&gt; m a</p><div class="doc"><p>Execute the loop body once.  This is a convenient way to introduce early
 exit support to a block of code.
</p><p><code><a href="Control-Monad-Trans-Loop.html#v:continue">continue</a></code> and <code><a href="Control-Monad-Trans-Loop.html#v:exit">exit</a></code> do the same thing inside of <code><a href="Control-Monad-Trans-Loop.html#v:once">once</a></code>.
</p></div></div><div class="top"><p class="src"><a name="v:repeatLoopT" class="def">repeatLoopT</a> :: <a href="file:///usr/local/Cellar/ghc/7.6.3/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="Control-Monad-Trans-Loop.html#t:LoopT">LoopT</a> c e m a -&gt; m e</p><div class="doc"><p>Execute the loop body again and again.  The only way to exit <code><a href="Control-Monad-Trans-Loop.html#v:repeatLoopT">repeatLoopT</a></code>
 is to call <code><a href="Control-Monad-Trans-Loop.html#v:exit">exit</a></code> or <code><a href="Control-Monad-Trans-Loop.html#v:exitWith">exitWith</a></code>.
</p></div></div><div class="top"><p class="src"><a name="v:iterateLoopT" class="def">iterateLoopT</a> :: <a href="file:///usr/local/Cellar/ghc/7.6.3/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:Monad">Monad</a> m =&gt; c -&gt; (c -&gt; <a href="Control-Monad-Trans-Loop.html#t:LoopT">LoopT</a> c e m c) -&gt; m e</p><div class="doc"><p>Call the loop body again and again, passing it the result of the previous
 iteration each time around.  The only way to exit <code><a href="Control-Monad-Trans-Loop.html#v:iterateLoopT">iterateLoopT</a></code> is to call
 <code><a href="Control-Monad-Trans-Loop.html#v:exit">exit</a></code> or <code><a href="Control-Monad-Trans-Loop.html#v:exitWith">exitWith</a></code>.
</p><p>Example:
</p><pre>count :: Int -&gt; IO Int
count n = iterateLoopT 0 $ \i -&gt;
    if i &lt; n
        then do
            lift $ print i
            return $ i+1
        else exitWith i
</pre></div></div><h1 id="g:4">Lifting other operations
</h1><div class="top"><p class="src"><a name="v:liftLocalLoopT" class="def">liftLocalLoopT</a> :: <a href="file:///usr/local/Cellar/ghc/7.6.3/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Monad.html#t:Monad">Monad</a> m =&gt; (<span class="keyword">forall</span> a.  m a -&gt; m a) -&gt; <a href="Control-Monad-Trans-Loop.html#t:LoopT">LoopT</a> c e m b -&gt; <a href="Control-Monad-Trans-Loop.html#t:LoopT">LoopT</a> c e m b</p><div class="doc"><p>Lift a function like <code><a href="file:///Users/dvekeman/github-vircures/appgent-ekiden-demo/.cabal-sandbox/share/doc/x86_64-osx-ghc-7.6.3/transformers-0.3.0.0/html/Control-Monad-Trans-Reader.html#t:local">local</a></code> or
 <code><a href="file:///usr/local/Cellar/ghc/7.6.3/share/doc/ghc/html/libraries/base-4.6.0.1/Control-Exception.html#t:mask_">mask_</a></code>.
</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.13.2</p></div></body></html>